# MeshBBS Configuration File
# Copy this to config.toml and customize for your installation

[bbs]
# Display name for your BBS (shown to users)
name = "Your MeshBBS Name"

# Sysop (system operator) username
sysop = "sysop"

# Sysop password hash (use: meshbbs --hash-password)
# CRITICAL: Generate your own hash! Do not leave default!
# Run: echo -n "your_secure_password" | meshbbs --hash-password
# Or the installer will generate this for you
sysop_password_hash = "REPLACE_WITH_YOUR_PASSWORD_HASH"

# Location identifier (ZIP code, city name, or grid square)
location = "90210"

# Description of your BBS (shown in welcome messages)
description = "Some information about your MeshBBS"

# Maximum concurrent users
max_users = 100

# Session timeout in minutes of inactivity
session_timeout = 30

# Welcome message shown at login
welcome_message = "Welcome to this Mesh BBS"

# Public command prefix (single character: ^ ! + $ / >)
# Default is "^" if omitted
public_command_prefix = "^"

# Allow public channel LOGIN command (security consideration)
# When false, users must initiate login via direct message only
# Recommended: false (prevents username enumeration on public channels)
allow_public_login = false

[meshtastic]
# Serial port for Meshtastic device
# Linux/macOS: /dev/ttyUSB0, /dev/ttyACM0, /dev/ttyUSB1
# Windows: COM3, COM4, etc.
port = "/dev/ttyUSB0"

# Baud rate (usually 115200)
baud_rate = 115200

# Optional: Your Meshtastic node ID (auto-detected if omitted)
# Example: node_id = "0x1234ABCD"  # can be decimal or 0xHEX

# Channel to monitor (0 = primary channel)
channel = 0

# Writer tuning (optional) - Defaults follow Meshtastic fairness rules
# Minimum time between any text sends (ms). Values below 2000 clamped to 2000.
min_send_gap_ms = 2000

# Retransmit backoff schedule in seconds for reliable DMs
dm_resend_backoff_seconds = [4, 8, 16]

# Extra delay before a broadcast immediately after a reliable DM (ms)
post_dm_broadcast_gap_ms = 1200

# Gap between consecutive reliable DMs (ms)
dm_to_dm_gap_ms = 600

# Identification beacon settings
[ident_beacon]
# Send identification beacon periodically
enabled = true
# Beacon frequency: "5min", "15min", "30min", "1hour" (default), "2hours", "4hours"
frequency = "1hour"

[storage]
# Directory to store BBS data (use absolute path in production)
data_dir = "./data"

# Maximum size for a single message (bytes)
# Maximum payload allowed by Meshtastic is 230 bytes
# Values above 230 will be clamped internally
max_message_size = 230

# Automatic backup configuration
[storage.backup]
# Enable automatic backups
enabled = true
# Keep backups for this many days
retention_days = 30
# How often to create backups (hours)
interval_hours = 24

[logging]
# Log level: trace, debug, info, warn, error
level = "info"

# Optional: Log to file
# file = "meshbbs.log"

[games]
# Enable TinyHack roguelike game
tinyhack_enabled = true

# Enable TinyMUSH multi-user game
tinymush_enabled = true

[games.tinymush]
# TinyMUSH data directory (relative to data_dir or absolute)
data_dir = "./data/tinymush"

[weather]
# OpenWeatherMap API configuration
# Get a free API key at: https://openweathermap.org/api
# IMPORTANT: You must replace this with your actual API key!
api_key = "REPLACE_WITH_YOUR_API_KEY"

# Enable weather functionality (requires valid API key)
enabled = false

# Default location for weather queries
default_location = "Los Angeles"

# Location type: "city", "zipcode", or "city_id"
location_type = "city"

# Country code for zipcode lookups (e.g., "US", "GB")
# Required when using zipcode location_type
country_code = "US"

# Cache duration in minutes
cache_ttl_minutes = 10

# Request timeout in seconds
timeout_seconds = 5

[welcome]
# Automatic welcome message system
# Greets new nodes detected on the mesh network
enabled = false

# Send public greeting via public channel
public_greeting = true

# Send private guide via DM
private_guide = true

# Minimum time between any welcomes (minutes) to prevent spam
cooldown_minutes = 5

# Maximum times to welcome the same node (prevents repeated welcomes)
max_welcomes_per_node = 1
